{% extends "base.html" %}
{% block title %}All Card{% endblock title %}
{% block content %}
    <!-- Page Header -->
    <div class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold mb-2">Browse All Cars</h1>
            <p class="text-gray-300">Showing {{ page_obj.paginator.count }} cars available for sale</p>
        </div>
    </div>

    <!-- Filter and Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Filters Sidebar -->
            <div class="lg:w-1/4">
                <form method="get" class="bg-white rounded-lg shadow-md p-6 mb-6">
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h3 class="text-xl font-bold mb-4">Filters</h3>
                    
                    <!-- Price Range -->
                    <div class="mb-6">
                        <h4 class="font-bold mb-2">Price Range</h4>
                        <div class="flex items-center space-x-2 mb-2">
                            <input type="number" name="min_price" value="{{ request.GET.min_price }}" placeholder="Min" class="w-1/2 p-2 border border-gray-300 rounded">
                            <span class="text-gray-500">to</span>
                            <input type="number" name="max_price" value="{{ request.GET.max_price }}" placeholder="Max" class="w-1/2 p-2 border border-gray-300 rounded">
                        </div>

                    </div>
                    
                    <!-- Make -->
                    <div class="mb-6">
                        <h4 class="font-bold mb-2">Make</h4>
                        <div class="space-y-2">
                            {% for brand in brands %}
                            <label class="flex items-center">
                                <input type="checkbox" name="brand" value="{{ brand.id }}" class="mr-2"
                                {% if brand.id|stringformat:"s" in selected_brands %}checked{% endif %}>
                                
                                <span>{{brand.name}}</span>
                            </label>
                            {% endfor %}
                        </div>
                    </div>
                
                    
                    <button type="submit" class="w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700">Apply Filters</button>
                    </form>
                </div>
                
                <!-- Sell Your Car CTA -->
                <div class="bg-red-600 text-white rounded-lg shadow-md p-6 text-center">
                    <i class="fas fa-car text-4xl mb-4"></i>
                    <h3 class="text-xl font-bold mb-2">Sell Your Car</h3>
                    <p class="mb-4">List your car for free and reach thousands of buyers</p>
                    <a href="{% url "sellcar" %}" class="inline-block bg-white text-red-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100">List Now</a>
                </div>
            </div>
            
            <!-- Cars Listing -->
            <div class="lg:w-3/4">
                <!-- Sorting -->
                <div class="bg-white rounded-lg shadow-md p-4 mb-6 flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-4 md:mb-0">
                        <span class="text-gray-600">Showing {{page_obj.start_index}}-{{page_obj.end_index}} of {{ page_obj.paginator.count }} cars</span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-600">Sort by:</span>
                        <select class="p-2 border border-gray-300 rounded-lg focus:outline-none">
                            <option>Newest First</option>
                            <option>Price: Low to High</option>
                            <option>Price: High to Low</option>
                            <option>Year: New to Old</option>
                            <option>Year: Old to New</option>
                        </select>
                    </div>
                </div>
                
                <!-- Cars Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    {% for car in cars %}
                    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition">
                        <div class="relative">
                            <img src="{{car.image.url}}" 
                                 alt="Car" class="w-full h-48 object-cover">
                        </div>
                        <div class="p-4">
                            <h3 class="text-lg font-bold mb-1">{{car.title}}</h3>
                            <p class="text-gray-600 text-sm mb-3">Truck • Automatic • 45,000 miles</p>
                            <div class="flex justify-between items-center">
                                <span class="text-xl font-bold text-red-600">BDT {{car.price}}</span>
                                <a href="{% url "car_details" car.id %}" class="bg-gray-800 text-white px-3 py-1 rounded text-sm hover:bg-gray-900">View</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    
                </div>
                
                <!-- Pagination -->
                <div class="mt-8 flex justify-center">
                    <nav class="flex items-center space-x-2">
                        {% if page_obj.has_previous %}
                         <a href="?page={{page_obj.previous_page_number}}&{{ request.GET.urlencode }}" class="px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">&laquo; Previous</a>
                        {% endif %}

                        <a href="#" class="px-3 py-2 bg-red-600 text-white rounded-lg">{{page_obj.number}}</a>

                        {% if page_obj.has_next %}
                         <a href="?page={{page_obj.next_page_number}}&{{ request.GET.urlencode }}" class="px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">Next &raquo;</a>
                        {% endif %} 
                        
                    </nav>
                </div>
            </div>
        </div>
    </div>

{% endblock content %}