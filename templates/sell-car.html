{% extends "base.html" %}
{% block title %}Sell Your Car Fast & Easy{% endblock title %}
{% block content %}
    <!-- Page Header -->
    <div class="bg-red-600 text-white py-12">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl font-bold mb-4">Sell Your Car Fast & Easy</h1>
            <p class="text-xl max-w-2xl mx-auto">Reach thousands of potential buyers. List your car for free in just a few minutes.</p>
        </div>
    </div>

    <!-- Sell Car Form -->
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            
            <!-- Form -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <h2 class="text-2xl font-bold mb-6">Car Information</h2>
                <form method='post' enctype = 'multipart/form-data' id="carForm" data-models-url="{% url 'ajax_load_models' %}">
                    {% csrf_token %}
                    
                    {% for field in form %}
                        <div>
                            <label class="block text-gray-700 font-medium mb-1">{{ field.label }}</label>
                            {{ field }}
                            
                            {% if field.errors %}
                                <p class="text-red-500 text-sm mt-1">{{ field.errors.0 }}</p>
                            {% endif %}
                        </div>
                    {% endfor %}

                    <div class="flex justify-end mt-6">
                        <button type="submit" 
                            class="w-full md:w-1/4 bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg transition duration-300">
                            Sell Car
                        </button>
                    </div>
                </form>
                
            </div>
            
        </div>
    </div>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function() {
    
        $("#id_brand").change(function () {
            var url = $("#carForm").attr("data-models-url");
            var brandId = $(this).val();

            if (brandId == "") {
                $("#id_car_model").html('<option value="">---------</option>');
                return;
            }

            $.ajax({
                url: url,
                data: {
                    'brand': brandId    
                },
                success: function (data) {
                    $("#id_car_model").html(data);  
                }
            });
        });
    });
</script>
{% endblock %}
